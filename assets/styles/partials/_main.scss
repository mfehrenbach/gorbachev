@use 'utilities' as *;

@forward 'typography';
@forward 'fonts';
@forward 'links';



#Main {
	// Base spacing.
	> *:not(:first-child) { margin-top: var(--typography--line--4) }

	%--nested--spacing {
		> *:not(:first-child) { margin-top: var(--typography--line) }
	}

	%--double--after {
		margin-bottom: var(--typography--line--2);

		+ * { margin-top: var(--typography--line--2) }
	}



	a {
		@extend %link--text;

		--color: var(--color--secondary);
	}

	blockquote {
		@extend %--double--after;
		@extend %--nested--spacing;

		--color: var(--color--secondary);

		padding-left:  var(--typography--lead);
		padding-right: var(--typography--line);
		position:      relative;

		&:after {
			background-color: var(--color--tertiary);
			content:          '';
			height:           calc(100% + var(--typography--lead));
			left:             0;
			position:         absolute;
			top:              calc(-1 * var(--typography--lead) / 2);
			width:            var(--typography--stroke);
		}
	}



	.dateline {
		@extend %--double--after;
		@extend %font--extended;
		@extend %font--gill-sans--on-verdana;
		@extend %font--uppercase;

		--color: var(--color--tertiary);
	}



	> dl.linkedlist {
		@extend %--nested--spacing;

		> dt {
			@extend %font--extended;
			@extend %font--gill-sans--on-verdana;
			@extend %typography;
			@extend %font--uppercase;

			--color: var(--color--secondary);

			&:not(:first-child) { margin-top: var(--typography--line--4) }

			> a {
				@extend %typography--underline--disable;

				&:last-of-type {
					--color: var(--color--tertiary);

					// Add gap, cancel out the `&nbsp;`, enlargement, and letter-spacing.
					margin-left: calc(var(--typography--lead) - 1ch - var(--link--enlargement) + (var(--typography--inset--right--override) * 1em));
				}
			}
		}

		> dd { @extend %--nested--spacing }
	}



	> div.article {
		@extend %--nested--spacing;

		> h1 {
			@extend %font--gill-sans--x-verdana-cap;

			> a { @extend %typography--underline--disable };
		}
	}



	> hr.ookiaks {
		display:    flow-root; // Prevent margin collapse.
		margin-top: calc(var(--typography--line-height) * 2); // Just two extra lines, no leading.

		@include width(568) {
			@include tall(600) {
				margin-top: calc(var(--typography--line-height) * 4); // Smoke emâ€™ if you got em.
			}
		}
	}



	#MainMartini {
		margin-bottom: var(--typography--line--2);
		margin-top:    var(--typography--line--2);
	}
}
