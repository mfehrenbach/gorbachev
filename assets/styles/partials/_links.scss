@use 'utilities' as *;

@forward 'typography';



// Active/focus states.
%--active-focus {
	-webkit-tap-highlight-color: var(--color--highlight);
	border-radius:               calc(var(--link--outline) * 2);
	cursor:                      pointer;
	transition-duration:         var(--link--transition);
	transition-property:         background-color, color;
	transition-timing-function:  ease-in-out;

	&:active {
		background-color: var(--color--highlight);
		border-radius:    calc(var(--link--enlargement) / 2);
	}

	&:focus {
		outline: none;
		z-index: 1;

		&:focus-visible:not(:disabled) {
			@extend %typography--underline--disable;

			outline-color:   var(--color--link, var(--color));
			outline-style:   solid;
			outline-width:   var(--link--outline);
		}
	}

	@include hover {
		--color: var(--color--hover);

		background-color: var(--color--highlight);

		&:active { background-color: var(--color--highlight--more) } // Two-step.
	}
}



// Container links.
%link--element {
	@extend %--active-focus;

	display:        flex;
	flex-direction: column;
	margin:         calc(var(--link--enlargement) * -1);
	padding:        var(--link--enlargement);
	width:          fit-content;
}

// In-text links.
%link--text {
	@extend %--active-focus;

	border-bottom-width: calc(var(--link--enlargement) / 2);
	border-color:        transparent;
	border-left-width:   var(--link--enlargement);
	border-right-width:  calc(var(--link--enlargement) + var(--typography--inset--right--override, 0) * 1em);;
	border-style:        solid;
	border-top-width:    calc(var(--link--enlargement) / 2);
	color:               var(--color);
	margin-bottom:       calc(-1 * var(--link--enlargement) / 2);
	margin-left:         calc(-1 * var(--link--enlargement));
	margin-right:        calc(-1 * (var(--link--enlargement) + var(--typography--inset--right--override, 0) * 1em));
	margin-top:          calc(-1 * var(--link--enlargement) / 2);

	// This sadly doesnâ€™t work in Safari, and causes overflows.
	@include browser(chrome) { -webkit-box-decoration-break: clone }
}
