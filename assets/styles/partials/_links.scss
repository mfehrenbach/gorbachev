@use 'utilities' as *;

@forward 'typography';



// Active/focus states.
%--active-focus {
	-webkit-tap-highlight-color: var(--color--highlight);
	border-radius:               var(--link--radius);
	cursor:                      pointer;
	transition-duration:         var(--link--transition);
	transition-property:         background-color, color, text-decoration-color;
	transition-timing-function:  ease-in-out;

	&:active { background-color: var(--color--highlight) }

	&:focus {
		outline: none;
		z-index: 1;

		&:focus-visible:not(:disabled) {
			@extend %typography--underline--disable;

			--color: var(--color--hover);

			outline-color:       var(--color);
			outline-style:       solid;
			outline-width:       var(--link--outline);
			transition-duration: initial;
		}
	}

	@include hover {
		--color: var(--color--hover);

		background-color:      var(--color--highlight);
		text-decoration-color: transparent;

		&:active { background-color: var(--color--highlight--more) } // Two-step.
	}
}



// Container links.
%link--element {
	@extend %--active-focus;

	display:        flex;
	flex-direction: column;
	margin:         calc(var(--link--enlargement) * -1);
	padding:        var(--link--enlargement);
	width:          fit-content;
}

// In-text links.
%link--text {
	@extend %--active-focus;
	@extend %typography--underline;

	// Start padding again on new lines. Safari ignores the negative margin, sadly.
	-webkit-box-decoration-break: clone;

	border-bottom: calc(var(--link--enlargement) - var(--typography--shoulder--bottom) * 1em) solid transparent;
	border-top :   calc(var(--link--enlargement) - var(--typography--shoulder--top) * 1em) solid transparent;
	color:         var(--color);
	margin-left:   calc(-1 * var(--link--enlargement));
	margin-right:  calc(-1 * (var(--link--enlargement) + var(--typography--inset--right--override, 0) * 1em));
	padding-left:  var(--link--enlargement);
	padding-right: calc(var(--link--enlargement) + var(--typography--inset--right--override, 0) * 1em);
}
